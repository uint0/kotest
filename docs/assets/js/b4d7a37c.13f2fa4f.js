"use strict";(self.webpackChunkkotestdocs=self.webpackChunkkotestdocs||[]).push([[99563],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},65759:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),o=["components"],s={id:"introduction",title:"Introduction",slug:"data-driven-testing.html"},l=void 0,p={unversionedId:"framework/datatesting/introduction",id:"framework/datatesting/introduction",title:"Introduction",description:"Before data-driven-testing can be used, you need to add the module kotest-framework-datatest to your build.",source:"@site/docs/framework/datatesting/data_driven_testing.md",sourceDirName:"framework/datatesting",slug:"/framework/datatesting/data-driven-testing.html",permalink:"/docs/next/framework/datatesting/data-driven-testing.html",draft:!1,editUrl:"https://github.com/kotest/kotest/blob/master/documentation/docs/framework/datatesting/data_driven_testing.md",tags:[],version:"current",frontMatter:{id:"introduction",title:"Introduction",slug:"data-driven-testing.html"},sidebar:"framework",previous:{title:"Exceptions",permalink:"/docs/next/framework/exceptions.html"},next:{title:"Data Test Names",permalink:"/docs/next/framework/datatesting/custom-test-names.html"}},c={},u=[{value:"Getting Started",id:"getting-started",level:2},{value:"Callbacks",id:"callbacks",level:3}],d={toc:u};function m(e){var t=e.components,s=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"Required Module",type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Before data-driven-testing can be used, you need to add the module ",(0,i.kt)("inlineCode",{parentName:"p"},"kotest-framework-datatest")," to your build.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"This section covers the new and improved data driven testing support that was released with Kotest 4.6.0.\nTo view the documentation for the previous data test support, ",(0,i.kt)("a",{parentName:"p",href:"/docs/next/framework/datatesting/data_driven_testing_4.2.0"},"click here"))),(0,i.kt)("p",null,"When writing tests that are logic based, one or two specific code paths that work through particular scenarios make\nsense. Other times we have tests that are more example based, and it would be helpful to test many combinations of\nparameters."),(0,i.kt)("p",null,"In these situations, ",(0,i.kt)("strong",{parentName:"p"},"data driven testing")," (also called table driven testing) is an easy technique to avoid tedious\nboilerplate."),(0,i.kt)("p",null,"Kotest has first class support for data driven testing built into the framework.\nThis means Kotest will automatically generate test case entries, based on input values provided by you."),(0,i.kt)("h2",{id:"getting-started"},"Getting Started"),(0,i.kt)("p",null,"Let's consider writing tests for a ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Pythagorean_triple"},"pythagorean triple")," function that\nreturns true if the input values are valid triples (",(0,i.kt)("em",{parentName:"p"},"a squared + b squared = c squared"),")."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"fun isPythagTriple(a: Int, b: Int, c: Int): Boolean = a * a + b * b == c * c\n")),(0,i.kt)("p",null,"Since we need more than one element per row (we need 3), we start by defining a data class that will hold a single ",(0,i.kt)("em",{parentName:"p"},"\nrow")," of values (in our case, the two inputs, and the expected result)."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"data class PythagTriple(val a: Int, val b: Int, val c: Int)\n")),(0,i.kt)("p",null,"We will create tests by using instances of this data class, passing them into the ",(0,i.kt)("inlineCode",{parentName:"p"},"withData")," function, which also\naccepts a lambda that performs the test logic for that given ",(0,i.kt)("em",{parentName:"p"},"row"),"."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'class MyTests : FunSpec({\n  context("Pythag triples tests") {\n    withData(\n      PythagTriple(3, 4, 5),\n      PythagTriple(6, 8, 10),\n      PythagTriple(8, 15, 17),\n      PythagTriple(7, 24, 25)\n    ) { (a, b, c) ->\n      isPythagTriple(a, b, c) shouldBe true\n    }\n  }\n})\n')),(0,i.kt)("p",null,"Notice that because we are using data classes, the input row can be destructured into the member properties.\nWhen this is executed, we will have 4 test cases in our input, one for each input row."),(0,i.kt)("p",null,"Kotest will automatically generate a test case for each input row, as if you had manually written a separate test case\nfor each."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"data test example output",src:n(10049).Z,width:"528",height:"216"})),(0,i.kt)("p",null,"The test names are generated from the data classes themselves but can be ",(0,i.kt)("a",{parentName:"p",href:"/docs/next/framework/datatesting/custom-test-names.html"},"customized"),"."),(0,i.kt)("p",null,"If there is an error for any particular input row, then the test will fail and Kotest will output the values that\nfailed. For example, if we change the previous example to include the row ",(0,i.kt)("inlineCode",{parentName:"p"},"PythagTriple(5, 4, 3)"),"\nthen that test will be marked as a failure."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"data test example output",src:n(53423).Z,width:"529",height:"249"})),(0,i.kt)("p",null,"The error message will contain the error and the input row details:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Test failed for (a, 5), (b, 4), (c, 3) expected:<9> but was:<41>")),(0,i.kt)("p",null,"In that previous example, we wrapped the ",(0,i.kt)("inlineCode",{parentName:"p"},"withData")," call in a parent test, so we have more context when the test results appear.\nThe syntax varies depending on the ",(0,i.kt)("a",{parentName:"p",href:"/docs/next/framework/testing-styles.html"},"spec style")," used - here we used ",(0,i.kt)("em",{parentName:"p"},"fun spec")," which uses context blocks for containers.\nIn fact, data tests can be nested inside any number of containers."),(0,i.kt)("p",null,"But this is optional, you can define data tests at the root level as well."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"class MyTests : FunSpec({\n  withData(\n    PythagTriple(3, 4, 5),\n    PythagTriple(6, 8, 10),\n    PythagTriple(8, 15, 17),\n    PythagTriple(7, 24, 25)\n  ) { (a, b, c) ->\n    isPythagTriple(a, b, c) shouldBe true\n  }\n})\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Data tests can only be defined at the root or in container scopes. They cannot be defined inside leaf scopes.")),(0,i.kt)("h3",{id:"callbacks"},"Callbacks"),(0,i.kt)("p",null,"If you wish to have before / after callbacks in data-driven tests, then you can use the standard ",(0,i.kt)("inlineCode",{parentName:"p"},"beforeTest"),"\n/ ",(0,i.kt)("inlineCode",{parentName:"p"},"afterTest")," support. Every test created using data-driven testing acts the same way as a regular test, so all standard callbacks work as if\nyou had written all the test by hand."),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'beforeTest {\n  // reset test setup\n}\n\ncontext("...") {\n  withData(X, Y, Z) { x,y,z ->\n    // test code\n  }\n}\n')))}m.isMDXComponent=!0},10049:function(e,t,n){t.Z=n.p+"assets/images/datatest1-55f0023d0e24fd14ff7081a3746e32ef.png"},53423:function(e,t,n){t.Z=n.p+"assets/images/datatest2-caababc9c261775d74c2c236cbf23686.png"}}]);